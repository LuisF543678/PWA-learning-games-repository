!function(){var t=320,e=0,n=!1,i=null,a=null,o=null,d=null;function c(){var t=a.getContext("2d");t.fillStyle="#AAA",t.fillRect(0,0,a.width,a.height);var e=a.toDataURL("image/png");o.setAttribute("src",e)}window.addEventListener("load",function(){i=document.getElementById("video"),a=document.getElementById("canvas"),o=document.getElementById("photo"),d=document.getElementById("startbutton"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(t){i.srcObject=t,i.play()}).catch(function(t){console.log("Error con la webcam: "+t)}),i.addEventListener("canplay",function(o){n||(e=i.videoHeight/(i.videoWidth/t),isNaN(e)&&(e=t/(4/3)),i.setAttribute("width",t),i.setAttribute("height",e),a.setAttribute("width",t),a.setAttribute("height",e),n=!0)},!1),d.addEventListener("click",function(n){!function(){var n=a.getContext("2d");if(t&&e){a.width=t,a.height=e,n.drawImage(i,0,0,t,e);var d=a.toDataURL("image/png");o.setAttribute("src",d)}else c()}(),n.preventDefault()},!1),c()},!1)}();